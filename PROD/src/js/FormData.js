export default class FormData{constructor(){this.form=document.querySelector("#form"),this.userEntries=[],this.userSelections=[],this.savedInquiry=JSON.parse(localStorage.getItem("saveInquiry"))||[],this.savedPerformanceSelection=JSON.parse(localStorage.getItem("savePerformanceSelection"))||[],localStorage.removeItem("savePerformanceSelection"),this.validEmail=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,this.userInputSend=document.querySelector(".sended-user-input-container"),this.userInputSendContent=document.querySelector(".sended-user-input"),this.form?(this.headlineInputSend=this.userInputSendContent.querySelector("h2"),this.paragraphInputSend=this.userInputSendContent.querySelector("p"),this.colorAlert="#ff7f50",this.colorSuccess="#b4ffd8",this.userInputSendBtn=document.querySelector(".user-input-sended-btn")):console.log("Form does not exist!")}start(){this.savedInquiry&&this.savedInquiry.length>=0&&(this.userEntries=this.savedInquiry),this.form&&this.form.addEventListener("submit",e=>{e.preventDefault();const t=document.querySelector("#name").value,n=document.querySelector("#last-name").value,s=document.querySelector("#email").value,r=document.querySelector("#tele-number").value,i=document.querySelector("#message").value,o={name:t,lastName:n,email:s,telephone:r,message:i};this.checkEntriesValid(o,this.savedInquiry)})}checkEntriesValid(e,t){e.email.match(this.validEmail)&&this.form?(this.userEntries.push(e),this.form.reset(),this.saveUserEntries(e,t)):this.buildUnsuccessfullSendWindowContent()}saveUserEntries(e,t){localStorage.setItem("saveInquiry",JSON.stringify(e)),this.userEntries=[],this.userEntries.push(t),localStorage.removeItem("saveInquiry"),this.getSavedPerformanceSelection()}getSavedPerformanceSelection(){let e={};this.savedPerformanceSelection.forEach((t,n)=>{let s="selection"+n;e[s]=t}),this.userEntries[0].push(e),this.buildSuccessfullSendWindowContent()}buildSuccessfullSendWindowContent(){this.headlineInputSend.textContent="Erfolgreich abgesendet!",this.paragraphInputSend.textContent="Vielen Dank für ihr Vertrauen. Wir haben Ihre Anfrage\n        erhalten und werden uns schnellst möglich darum kümmern.",this.headlineInputSend.style.color=this.colorSuccess,this.paragraphInputSend.style.color=this.colorSuccess,this.openUserInputSendWindow()}buildUnsuccessfullSendWindowContent(){this.headlineInputSend.textContent="Upps, da ist was schief gelaufen. Versuchen sie es noch einmal!",this.paragraphInputSend.textContent="Die von Ihnen eingegebene Email Adresse entspricht nicht dem gängigen Format für Email Adressen",this.headlineInputSend.style.color=this.colorAlert,this.paragraphInputSend.style.color=this.colorAlert,this.openUserInputSendWindow()}openUserInputSendWindow(){this.userInputSend.style.display="flex",this.closeUserInputSendWindow()}closeUserInputSendWindow(){this.userInputSendBtn.addEventListener("click",()=>{this.userInputSend.style.display="none"})}}